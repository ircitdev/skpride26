/* ============================================
   iOS Safari Scroll Fixes
   ============================================ */

/* Общие фиксы для body при открытых модалках */
body.modal-open {
  position: fixed !important;
  width: 100% !important;
  height: 100% !important;
  overflow: hidden !important;
  -webkit-overflow-scrolling: touch !important;
}

/* Фикс для всех модальных окон на iOS */
@supports (-webkit-touch-callout: none) {
  /* Это условие работает только в Safari iOS */

  /* Все модальные окна - БАЗОВЫЕ настройки */
  .sport-modal,
  .rest-modal,
  .kids-modal,
  .events-modal,
  .ice-modal,
  .about-modal,
  .relax-modal,
  .pricing-modal,
  .contacts-modal,
  .review-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100% !important;
    height: 100% !important;
    overflow: hidden !important;
  }

  /* Модалки БЕЗ скроллеров - скроллятся сами */
  .sport-modal.active,
  .rest-modal.active,
  .kids-modal.active,
  .events-modal.active,
  .contacts-modal.active {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior-y: contain !important;
    touch-action: pan-y !important;
  }

  /* Модалки СО скроллерами - НЕ скроллятся сами */
  .about-modal.active,
  .relax-modal.active,
  .pricing-modal.active,
  .review-modal.active,
  .ice-modal.active {
    overflow: hidden !important;
  }

  /* Скроллеры - ФИКСИРОВАННОЕ позиционирование внутри модалки */
  .ice-modal-scroller,
  .about-scroller,
  .relax-scroller,
  .pricing-scroller,
  .review-scroller {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    height: 100dvh !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior-y: contain !important;
    touch-action: pan-y !important;
    z-index: 1 !important;
  }

  /* Боковые панели */
  .schedule-modal,
  .fulldesc-modal {
    position: fixed !important;
    height: 100vh !important;
    height: -webkit-fill-available !important;
    overflow-y: scroll !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior-y: contain !important;
  }

  /* Нижняя панель выбора слайдов */
  .slide-selector-panel {
    max-height: 70vh !important;
    max-height: calc(var(--vh, 1vh) * 70) !important;
    overflow-y: scroll !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior-y: contain !important;
  }

  /* Фикс для вложенных скроллеров */
  .sport-card,
  .kids-card,
  .rest-card,
  .events-card {
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
  }

  /* Отключаем pull-to-refresh на модалках */
  .sport-modal.active,
  .rest-modal.active,
  .kids-modal.active,
  .events-modal.active,
  .ice-modal.active,
  .about-modal.active,
  .pricing-modal.active {
    overscroll-behavior-y: contain !important;
    touch-action: pan-y !important;
  }

  /* Фикс для контента внутри модалок */
  .modal-content,
  .offcanvas__body {
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
  }
}

/* Дополнительные фиксы для iPhone X и новее (с вырезом) */
@media only screen
  and (device-width: 375px)
  and (device-height: 812px)
  and (-webkit-device-pixel-ratio: 3),
only screen
  and (device-width: 390px)
  and (device-height: 844px)
  and (-webkit-device-pixel-ratio: 3),
only screen
  and (device-width: 428px)
  and (device-height: 926px)
  and (-webkit-device-pixel-ratio: 3) {

  /* Модальные окна на iPhone с вырезом */
  .sport-modal,
  .rest-modal,
  .kids-modal,
  .events-modal,
  .ice-modal,
  .about-modal,
  .pricing-modal {
    padding-top: env(safe-area-inset-top) !important;
    padding-bottom: env(safe-area-inset-bottom) !important;
  }
}

/* Фикс для горизонтальной ориентации */
@media (orientation: landscape) and (max-height: 500px) {
  .about-scroller,
  .pricing-scroller,
  .ice-modal-scroller {
    height: 100vh !important;
    height: -webkit-fill-available !important;
  }
}

/* Предотвращение "резинового" эффекта на границах */
body,
html {
  overscroll-behavior-y: none;
}
